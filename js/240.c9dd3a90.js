"use strict";(self["webpackChunkjx3_tool"]=self["webpackChunkjx3_tool"]||[]).push([[240],{240:function(e,t,r){r.r(t),r.d(t,{default:function(){return F}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex-column flex-ai-stretch"},[t("Operation",{ref:"operation",staticClass:"flex-none",on:{select:e.select}}),t("Time",{ref:"time",staticClass:"mgb10",attrs:{timestamp:e.timestamp,multipleSelection:e.multipleSelection},on:{time:e.recordTime,multipleDelet:e.multipleDelet}}),t("DataTable",{staticClass:"flex-auto",attrs:{tableData:e.tableData},on:{selection:e.selection}})],1)},a=[],i=(r(7658),r(7484)),s=r.n(i),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"forcast-time"},[t("div",{staticClass:"container flex-row flex-center"},[t("div",{staticClass:"startTime"},[e._v(e._s(e._f("dateToString")(e.timestamp,"datetime")))]),t("div",{staticClass:"symbol"},[e._v("+")]),t("div",{staticClass:"intervalTime"},[t("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.intervalTime,callback:function(t){e.$set(e.form,"intervalTime",t)},expression:"form.intervalTime"}}),e._v(" 分钟 ")],1),t("div",{staticClass:"symbol"},[e._v("=")]),e.form.intervalTime?t("div",{staticClass:"endTime"},[e._v(" "+e._s(e._f("dateToString")(e.form.endTime,"datetime"))+" ")]):t("div",{staticClass:"endTime"},[e._v(" "+e._s(e._f("dateToString")(e.timestamp,"datetime"))+" ")])]),t("div",{staticClass:"del"},[e.multipleSelection&&e.multipleSelection.length?t("el-button",{on:{click:e.onClickDel}},[e._v("删除")]):e._e()],1),t("div",{staticClass:"record"},[t("el-button",{attrs:{type:"primary"},on:{click:e.onRecordTime}},[e._v("记录时间")])],1)])},o=[];const m=()=>({originTime:0,intervalTime:0,endTime:0});var c={name:"ForcastTime",props:{timestamp:{type:Number,default:()=>0},multipleSelection:{type:Array,default:()=>[]}},watch:{"form.intervalTime":{handler(e){this.form.originTime=this.timestamp;let t=60*e*1e3;this.form.endTime=t+this.timestamp}}},data(){return{form:m()}},methods:{onRecordTime(){this.$emit("time",this.form),this.form=m()},onClickDel(){this.$emit("multipleDelet")},reset(){this.form=m()}}},f=c,p=r(1001),u=(0,p.Z)(f,n,o,!1,null,"074b288e",null),d=u.exports,h=function(){var e=this,t=e._self._c;return t("el-form",{staticClass:"flex-row flex-wrap",attrs:{inline:!0,model:e.form}},[t("div",{staticClass:"flex-auto"}),t("el-form-item",[t("el-select",{attrs:{filterable:"",placeholder:"请选择大区"},on:{change:e.onChangeZone},model:{value:e.form.zone,callback:function(t){e.$set(e.form,"zone",t)},expression:"form.zone"}},e._l(e.zoneList,(function(e){return t("el-option",{key:e.zone,attrs:{label:e.zone,value:e.zone}})})),1)],1),t("el-form-item",[t("el-select",{attrs:{filterable:"",placeholder:"请选择服务器"},model:{value:e.form.server,callback:function(t){e.$set(e.form,"server",t)},expression:"form.server"}},e._l(e.serverList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",[t("el-select",{attrs:{filterable:"",placeholder:"请选择地图"},on:{change:e.onChangeMap},model:{value:e.form.map,callback:function(t){e.$set(e.form,"map",t)},expression:"form.map"}},e._l(e.horseMapData,(function(r){return t("el-option-group",{key:r.type,attrs:{label:r.type}},e._l(r.positions,(function(e){return t("el-option",{key:e.map,attrs:{label:e.map,value:e.map}})})),1)})),1)],1),t("el-form-item",[t("el-select",{attrs:{filterable:"",placeholder:"请选择马驹类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.horseTypeList,(function(r){return t("el-option",{key:r,attrs:{label:r,value:r}},[t("span",{domProps:{innerHTML:e._s(e.$options.filters.filterKeyWord(r))}})])})),1)],1)],1)},v=[],b=r(2067),_=r(169),y=JSON.parse('{"黑戈壁":["龙子(变异)/麟驹","绝尘/赤蛇/闪电(变异)","里飞沙","赤兔"],"鲲鹏岛":["龙子/麟驹(变异)","绝尘/赤蛇(变异)/闪电","里飞沙","赤兔"],"阴山大草原":["龙子/麟驹","绝尘(变异)/赤蛇/闪电","里飞沙","赤兔"],"昆仑":["绝尘/赤蛇/闪电"],"南屏山":["绝尘/赤蛇/闪电"],"白龙口":["绝尘/赤蛇/闪电"],"无量山":["绝尘/赤蛇/闪电"],"黑龙沼":["里飞沙"],"金水镇":["龙子/麟驹"],"巴陵县":["龙子/麟驹"],"龙门荒漠":["龙子/麟驹"]}');const g=()=>({zone:"双线一区",server:"破阵子",map:"",type:""});var D={data(){return{serverData:b,horseMapData:_,horseTypeData:y,form:g()}},computed:{zoneList(){return b},serverList(){return this.form.zone?b.find((e=>e.zone==this.form.zone)).servers:b.map((e=>e.servers)).flat()},horseTypeList(){return this.form.map?y[this.form.map]:new Set(Object.values(y).flat())}},watch:{form:{handler(e){this.$emit("select",e)},deep:!0,immediate:!0}},methods:{onChangeZone(){this.form.server=this.serverList[0]},onChangeMap(){this.form.type=this.horseTypeList[0]},reset(){this.form.map="",this.form.type=""}}},S=D,T=(0,p.Z)(S,h,v,!1,null,"78718850",null),x=T.exports,C=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.filterData,height:"70vh","cell-class-name":e.delLine},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"originTime",label:"记录时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dateToString")(t.row.originTime,"datetime"))+" ")]}}])}),t("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.zone)+" ")]}}])},[t("template",{slot:"header"},[t("div",[e._v("大区")]),t("div",[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.filterZone,callback:function(t){e.filterZone=t},expression:"filterZone"}},e._l(e.tableFilter(e.tableData,"zone"),(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)])],2),t("el-table-column",{attrs:{prop:"server",label:"服务器",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.server)+" ")]}}])},[t("template",{slot:"header"},[t("div",[e._v("服务器")]),t("div",[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.filterServer,callback:function(t){e.filterServer=t},expression:"filterServer"}},e._l(e.filterZone?e.tableFilter(e.tableData,"server").filter((t=>e.serverList.find((t=>t.zone==e.filterZone)).servers.includes(t))):e.tableFilter(e.tableData,"server"),(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)])],2),t("el-table-column",{attrs:{prop:"map",label:"地图",align:"center"}}),t("el-table-column",{attrs:{prop:"type",label:"类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",{domProps:{innerHTML:e._s(e.$options.filters.filterKeyWord(r.row.type))}}),r.row.overTime?t("span",{staticClass:"mgl10 showHorse"},[e._v("(已刷马)")]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"endTime",label:"刷马时间",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dateToString")(t.row.endTime,"datetime"))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{staticClass:"mgr10",attrs:{size:"mini"},on:{click:function(t){return e.copy(r.row)}}},[e._v("复制")]),t("el-popconfirm",{attrs:{"confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-info","icon-color":"red",title:"确定删除该条刷马信息？"},on:{confirm:function(t){return e.onClickDel(r.row)}}},[t("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1)},k=[],w=r(3344),z=JSON.parse('["(◕ˇ∀ˇ◕)","(｡ì _ í｡)","_(•̀ω•́ 」∠)_","（￣⊿￣）","( ﹡ˆoˆ﹡ )","ヾ(✿ﾟ▽ﾟ)ノ","Ｏ(≧∇≦)Ｏ","(◕ˇ∀ˇ◕)","˗ˋˏ♡ˎˊ˗","๐˙Ⱉ˙๐","( * ´ ⌃`*)ゞ","（｡ò ∀ ó｡）","_(•̀ω•́ 」∠)_","ヾ(✿ﾟ▽ﾟ)ノ","(o^ ^o) /","(✩˙Ⱉ˙ฅ)","˙Ⱉ˙ฅ","(๑´∀`๑)","(๑•̀ㅂ•́)و✧","๑乛◡乛๑","(๑•́ ₃ •̀๑)","(๑¯Δ¯๑)","(๑\'ᴗ\'๑)","٩(๑>◡<๑)۶","乁(๑˙ϖ˙๑乁) ","ρʕ•̫͡•ʔϠ","d(ŐдŐ๑)","ε(*′･∀･｀)зﾞ","ฅ՞•ﻌ•՞ฅ","ヾ(✿ﾟ▽ﾟ)ノ","♡´･ᴗ･`♡","(๑`н´๑)","|•\'-\'•) ✧","( ˶ˆ꒳ˆ˵ )","۶•͈⚇•͈ა","૮₍ ˃ ⤙ ˂ ₎ა","(｡ì _ í｡)","°ʚ♡ɞ°","つ♡⊂"," ( * ´ ⌃`*)ゞ"]'),$={name:"ForcastDataTable",props:{tableData:{type:Array,default:()=>[]}},data(){return{emoticons:z,serverList:b,filterZone:"",filterServer:""}},computed:{filterZoneData:function(){return function(e){return e.filter((e=>e.zone==this.filterZone))}},filterServerData:function(){return function(e){return e.filter((e=>e.server==this.filterServer))}},filterData(){return this.filterZone?this.filterServer?this.filterServerData(this.filterZoneData(this.tableData)):this.filterZoneData(this.tableData):this.filterServer?this.filterZone?this.filterZoneData(this.filterServerData(this.tableData)):this.filterServerData(this.tableData):this.tableData},tableFilter:function(){return function(e,t){return[...new Set(e.map((e=>e[t])))]}}},methods:{delLine({row:e,column:t,rowIndex:r,columnIndex:l}){if(5==e.overTime)return"del_line"},handleSelectionChange(e){this.$emit("selection",e)},copy(e){let t=this.emoticons[(0,w.Iy)(0,this.emoticons.length)],r=document.createElement("input");r.value=`【${e.server}】将于 ${this.$options.filters.dateToString(e.endTime,"datetime")} 在 ${e.map} 刷新马驹 ${e.type.split("/").join("\\")} ${t}`,document.body.appendChild(r),r.select(),document.execCommand("Copy"),this.$message.success("复制成功"),r.remove()},onClickDel(e){let t=this.tableData.findIndex((t=>t==e));console.log(t),this.tableData.splice(t,1)}}},Z=$,O=(0,p.Z)(Z,C,k,!1,null,"9d5da558",null),L=O.exports,N={components:{Time:d,Operation:x,DataTable:L},data(){return{form:{},tableData:[],timer:null,timestamp:0,multipleSelection:[]}},watch:{tableData:{handler(e){window.localStorage.setItem("horseData",JSON.stringify(e))}},timestamp:{handler(e){let t=JSON.parse(JSON.stringify(this.tableData)),r=300,l=600;t.forEach((a=>{let i=s()(e).diff(a.endTime,"second");if(i==r)t.find((e=>e==a)).overTime=5,this.tableData=t;else if(i>l){let e=t.findIndex((e=>e==a));t.splice(e,1),this.tableData=t}}))}}},created(){this.timestamp=Number(s()().valueOf())},mounted(){clearInterval(this.timer),this.timer=setInterval((()=>{this.timestamp=Number(s()().valueOf())}),1e3),window.localStorage.getItem("horseData")&&(this.tableData=JSON.parse(window.localStorage.getItem("horseData")))},beforeDestroy(){clearInterval(this.timer)},methods:{select(e){this.form=e},recordTime(e){this.form=Object.assign(this.form,e),this.tableData.push(JSON.parse(JSON.stringify(this.form))),this.$refs.operation.reset(),this.$refs.time.reset()},selection(e){this.multipleSelection=e},multipleDelet(){this.$confirm("此操作将删除信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.multipleSelection.forEach((e=>{let t=this.tableData.findIndex((t=>t==e));this.tableData.splice(t,1)})),this.$message({type:"success",message:"删除成功!"})})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}}},I=N,J=(0,p.Z)(I,l,a,!1,null,"734a8bad",null),F=J.exports},169:function(e){e.exports=JSON.parse('[{"type":"马场","positions":[{"map":"黑戈壁","suffix":"燕歌"},{"map":"鲲鹏岛","suffix":"潮生"},{"map":"阴山大草原","suffix":"踏莎"}]},{"type":"大马","positions":[{"map":"昆仑"},{"map":"南屏山"},{"map":"白龙口"},{"map":"无量山"},{"map":"黑龙沼"}]},{"type":"小马","positions":[{"map":"金水镇"},{"map":"巴陵县"},{"map":"龙门荒漠"}]}]')},2067:function(e){e.exports=JSON.parse('[{"zone":"双线一区","servers":["破阵子","天鹅坪"]},{"zone":"电信一区","servers":["长安城","龙争虎斗","蝶恋花"]},{"zone":"电信五区","servers":["剑胆琴心","幽月轮","乾坤一掷","斗转星移","唯我独尊","梦江南","横刀断浪"]},{"zone":"电信八区","servers":["绝代天骄"]},{"zone":"双线二区","servers":["飞龙在天"]},{"zone":"双线四区","servers":["青梅煮酒"]}]')}}]);